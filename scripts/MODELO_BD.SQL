-- Creación de Tabla de Usuarios
DROP TABLE USUARIOS CASCADE CONSTRAINTS;

CREATE TABLE USUARIOS
(
  CODIGO  VARCHAR2(30),
  NOMBRE  VARCHAR2(200),
  EMAIL   VARCHAR2(100),
  CLAVE   VARCHAR2(50),
  TIPO    VARCHAR2(10),
  ESTADO  VARCHAR2(1)
)
TABLESPACE SBIB_DATA
  PCTFREE 10
  INITRANS 1
  MAXTRANS 255
  STORAGE
  (
    INITIAL 64K
    NEXT 1M
    minextents 1
    maxextents unlimited
  );
  
-- Add comments to the table 
COMMENT ON TABLE USUARIOS IS 'Información de usuarios del sistema';
COMMENT ON COLUMN USUARIOS.CODIGO IS 'Código único de usuario del sistema';
COMMENT ON COLUMN USUARIOS.NOMBRE IS 'Nombre del usuario';
COMMENT ON COLUMN USUARIOS.EMAIL IS 'Correo electrónico del usuario';
COMMENT ON COLUMN USUARIOS.CLAVE IS 'Clave de acceso del usuario';
COMMENT ON COLUMN USUARIOS.TIPO IS 'Tipo de Usuario. ADM-Administrador, USR-Usuario Normal';
COMMENT ON COLUMN USUARIOS.ESTADO IS 'Estado del usuario : A-Activo, I-Inactivo';


ALTER TABLE USUARIOS
  ADD CONSTRAINT PK_USUARIOS PRIMARY KEY (CODIGO)
  USING INDEX 
  TABLESPACE SBIB_IND
  PCTFREE 10
  INITRANS 2
  MAXTRANS 255
  STORAGE
  (
    INITIAL 64K
    NEXT 1M
    MINEXTENTS 1
    MAXEXTENTS UNLIMITED
  );
  
ALTER TABLE USUARIOS
  ADD CONSTRAINT CK_USUARIOS_ESTADO
  CHECK (ESTADO IN ('A','I'));
  
  
-- Creación de Tabla de Productos
DROP TABLE PRODUCTOS CASCADE CONSTRAINTS;

CREATE TABLE PRODUCTOS
(
  CODIGO VARCHAR2(50),
  DESCRIPCION VARCHAR2(500),
  DISPONIBLE NUMBER(10),
  PRECIO_COSTO NUMBER(10,2),
  PRECIO_VENTA NUMBER(10,2),
  NIVEL_INVENTARIO NUMBER(10),
  PAGA_IMPUESTO VARCHAR2(1)
  
)
TABLESPACE SBIB_DATA
  PCTFREE 10
  INITRANS 1
  MAXTRANS 255
  STORAGE
  (
    INITIAL 64K
    NEXT 1M
    minextents 1
    maxextents unlimited
  );
  
-- Add comments to the table 
COMMENT ON TABLE PRODUCTOS IS 'Catálogo de productos del sistema';
COMMENT ON COLUMN PRODUCTOS.CODIGO IS 'Código único de identificación del producto';
COMMENT ON COLUMN PRODUCTOS.DESCRIPCION IS 'Descripción del producto';
COMMENT ON COLUMN PRODUCTOS.DISPONIBLE IS 'Cantidad disponible del producto en inventario';
COMMENT ON COLUMN PRODUCTOS.PRECIO_COSTO IS 'Precio de costo del producto';
COMMENT ON COLUMN PRODUCTOS.PRECIO_VENTA IS 'Precio de venta del producto';
COMMENT ON COLUMN PRODUCTOS.NIVEL_INVENTARIO IS 'Límite mínimo de inventario que puede haber del producto';
COMMENT ON COLUMN PRODUCTOS.PAGA_IMPUESTO IS 'Indica si el producto es excento o no del impuesto. S-Sí, N-No';

ALTER TABLE PRODUCTOS
  ADD CONSTRAINT PK_PRODUCTOS PRIMARY KEY (CODIGO)
  USING INDEX 
  TABLESPACE SBIB_IND
  PCTFREE 10
  INITRANS 2
  MAXTRANS 255
  STORAGE
  (
    INITIAL 64K
    NEXT 1M
    MINEXTENTS 1
    MAXEXTENTS UNLIMITED
  );
  
ALTER TABLE PRODUCTOS
  ADD CONSTRAINT CK_PRODUCTOS_PAGAIMPUESTO
  CHECK (PAGA_IMPUESTO IN ('S','N'));
  
